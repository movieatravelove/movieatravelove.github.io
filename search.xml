<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="/2019/04/10/spring%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/"/>
      <url>/2019/04/10/spring%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="关于Spring的-Controller-Service等的线程安全问题"><a href="#关于Spring的-Controller-Service等的线程安全问题" class="headerlink" title="关于Spring的@Controller @Service等的线程安全问题"></a>关于Spring的@Controller @Service等的线程安全问题</h2><blockquote></blockquote><p><a href="https://blog.csdn.net/u012843361/article/details/84023869?tdsourcetag=s_pctim_aiomsg" target="_blank" rel="noopener">参考链接</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>使用shell部署jar包</title>
      <link href="/2019/04/04/%E4%BD%BF%E7%94%A8shell%E9%83%A8%E7%BD%B2jar%E5%8C%85/"/>
      <url>/2019/04/04/%E4%BD%BF%E7%94%A8shell%E9%83%A8%E7%BD%B2jar%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<blockquote><p>SpringBoot部署到服务器，首先我们需要将项目打成jar包，然后上传到服务器上，使用shell部署jar包。</p></blockquote><a id="more"></a><h3 id="一、使用shell部署jar"><a href="#一、使用shell部署jar" class="headerlink" title="一、使用shell部署jar"></a>一、使用shell部署jar</h3><ol><li><p>复制本shell为deploy.sh(文末), 然后将jar包和本shell放在同一目录</p></li><li><p>执行chmod u+x deploy.sh</p></li><li><p>执行./deploy.sh aaa.jar pro log</p><blockquote><p>参数1，jar包完整名称（带.jar）</p><p>参数2，运行环境如prd</p><p>参数3，日志目录（输入的目录不存在会自动创建）</p></blockquote></li></ol><h3 id="二、停止运行"><a href="#二、停止运行" class="headerlink" title="二、停止运行"></a>二、停止运行</h3><ol><li><p>使用命令行找出正在运行的jar 的进程id</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep aaa.jar</span><br></pre></td></tr></table></figure></li><li><p>杀进程</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 进程id</span><br></pre></td></tr></table></figure></li></ol><h3 id="三、注意事项"><a href="#三、注意事项" class="headerlink" title="三、注意事项"></a>三、注意事项</h3><ol><li><p>先执行whereis bash，目录如果不是/usrbin/bash，就替换shell第一行的bash地址声明</p></li><li><p>如果无权限，使用 vim deploy.sh 进入deploy.sh后， 在底部模式下(shift + :)， 执行 :set fileformat=unix 后执行 :x 或者 :wq 保存修改。 然后就可以执行 ./a.sh 运行脚本</p></li></ol><h3 id="四、shell文件"><a href="#四、shell文件" class="headerlink" title="四、shell文件"></a>四、shell文件</h3><p>deploy.sh</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>! /bin/bash</span><br><span class="line"></span><br><span class="line">JAR_FILE=$1</span><br><span class="line">PACKAGE_PATH=/home/package</span><br><span class="line">PROJECT_PROFILE=prd</span><br><span class="line">LOG_PATH=$3</span><br><span class="line"></span><br><span class="line">export JAVA_HOME=$JAVA_HOME</span><br><span class="line"></span><br><span class="line">echo -e "\n\033[46;30m ========== 欢迎使用本脚本部署应用 version 1.0 created by Jerry.Song ========= \033[0m\n"</span><br><span class="line"></span><br><span class="line">if [[ -f $JAR_FILE ]]; then</span><br><span class="line">    echo "已经找到文件 $JAR_FILE,任务即将开始..."</span><br><span class="line">    TEMP_PATH=`pwd`</span><br><span class="line">    echo -e "当前所在文件夹: \033[1;34m $TEMP_PATH \033[0m"</span><br><span class="line">else</span><br><span class="line">    echo "当前目录下没有jar文件,请检查!"</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [[ -z $TEMP_PATH ]]; then</span><br><span class="line">    echo "当前目录读取错误,程序即将停止运行"</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">PID=$(ps -ef | grep -w $&#123;JAR_FILE&#125; | grep -w java | grep -v grep | awk '&#123;print $2&#125;')</span><br><span class="line"></span><br><span class="line">if [[ -z $&#123;PID&#125; ]]; then</span><br><span class="line">    echo "没有旧的jar文件在运行,等待部署流程启动...";</span><br><span class="line">else</span><br><span class="line">    echo -e "开始杀死旧jar文件进程,进程id为：\033[1;34m $PID \033[0m";</span><br><span class="line">    kill -9 $&#123;PID&#125;;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [[ ! -d $PACKAGE_PATH ]]; then</span><br><span class="line">    mkdir -p $PACKAGE_PATH</span><br><span class="line">    cd $PACKAGE_PATH</span><br><span class="line">else</span><br><span class="line">    cd $PACKAGE_PATH</span><br><span class="line">    if [[ -f $JAR_FILE ]];then</span><br><span class="line">        mv $&#123;JAR_FILE&#125; "$&#123;JAR_FILE/.*/&#125;_`date +%Y%m%d%H%M%S`.jar"</span><br><span class="line">    fi</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">cp $TEMP_PATH/$JAR_FILE ./$JAR_FILE</span><br><span class="line">if [[ ! -z $2 ]]; then</span><br><span class="line">        PROJECT_PROFILE=$2</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [[ -z $LOG_PATH ]]; then</span><br><span class="line">    LOG_PATH=~/logs</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo -e "当前日志目录指向 ====&gt;  \033[1;34m $LOG_PATH \033[0m"</span><br><span class="line"></span><br><span class="line">if [[ ! -d $LOG_PATH ]]; then</span><br><span class="line">        mkdir -p $LOG_PATH</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo -e "\n请稍等片刻,程序即将被部署,当前运行环境配置为: \033[1;34m $PROJECT_PROFILE \033[0m"</span><br><span class="line"></span><br><span class="line">nohup java -server -Xms128M -Xmx512M -jar $JAR_FILE --spring.profiles.active=$PROJECT_PROFILE &gt;&gt; $LOG_PATH/$&#123;JAR_FILE%.*&#125;.log 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line">if [[ $? = 0 ]]; then</span><br><span class="line">    echo -e "\n\033[5;31m ===================== 成功运行项目,请等待5秒加载系统日志 ==================== \033[0m\n"</span><br><span class="line">    sleep 5</span><br><span class="line">    tail -f $&#123;LOG_PATH&#125;/$&#123;JAR_FILE%.*&#125;.log</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><hr><p><br></p><blockquote><p>参考：</p><p><a href="https://blog.csdn.net/qq_34409900/article/details/80561277" target="_blank" rel="noopener">https://blog.csdn.net/qq_34409900/article/details/80561277</a></p><p><a href="https://blog.csdn.net/qq_32423845/article/details/79851737" target="_blank" rel="noopener">https://blog.csdn.net/qq_32423845/article/details/79851737</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> jar </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot + vue</title>
      <link href="/2019/04/03/springboot_vue/"/>
      <url>/2019/04/03/springboot_vue/</url>
      
        <content type="html"><![CDATA[<p>SptingBoot + Vue 前后端分离开发总结</p><h2 id="一、跨域问题"><a href="#一、跨域问题" class="headerlink" title="一、跨域问题"></a>一、跨域问题</h2><p>详情见上一篇文章 -&gt; <a href="http://blog.mozzie.xyz/2019/03/29/cros/" target="_blank" rel="noopener">SpringBoot使用CROS解决跨域问题</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CorsConfig</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">private</span> CorsConfiguration <span class="title">buildConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">CorsConfiguration corsConfiguration = <span class="keyword">new</span> CorsConfiguration();</span><br><span class="line">corsConfiguration.addAllowedOrigin(<span class="string">"*"</span>);</span><br><span class="line">corsConfiguration.addAllowedHeader(<span class="string">"*"</span>);</span><br><span class="line">corsConfiguration.addAllowedMethod(<span class="string">"*"</span>);</span><br><span class="line">corsConfiguration.setAllowCredentials(<span class="keyword">true</span>);</span><br><span class="line"><span class="keyword">return</span> corsConfiguration;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">corsFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">UrlBasedCorsConfigurationSource source = <span class="keyword">new</span> UrlBasedCorsConfigurationSource();</span><br><span class="line">source.registerCorsConfiguration(<span class="string">"/**"</span>, buildConfig());</span><br><span class="line">FilterRegistrationBean bean = <span class="keyword">new</span> FilterRegistrationBean(<span class="keyword">new</span> CorsFilter(source));</span><br><span class="line">bean.setOrder(Ordered.HIGHEST_PRECEDENCE);</span><br><span class="line"><span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二、每次请求session-不一致问题"><a href="#二、每次请求session-不一致问题" class="headerlink" title="二、每次请求session 不一致问题"></a>二、每次请求session 不一致问题</h2><ul><li><p>后端 Controller</p><p>  登录接口返回sessionId</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> HttpSession session;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> HttpServletRequest request;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 登录接口</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"login"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(@RequestBody User user)</span> </span>&#123;</span><br><span class="line">RespInfo respInfo = <span class="keyword">new</span> RespInfo();</span><br><span class="line"><span class="keyword">if</span> (user.getUsername().equals(<span class="string">"admin"</span>)</span><br><span class="line">&amp;&amp;user.getPassword().equals(<span class="string">"admin"</span>)) &#123;</span><br><span class="line">respInfo.setCode(<span class="number">20</span>);</span><br><span class="line">respInfo.setMsg(<span class="string">"登录成功"</span>);</span><br><span class="line">respInfo.setData(session.getId());</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">respInfo.setCode(<span class="number">50</span>);</span><br><span class="line">respInfo.setData(session.getId());</span><br><span class="line">respInfo.setMsg(<span class="string">"账号或密码错误"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> JSON.toJSONString(respInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 请求接口1</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> num</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"index1"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">index1</span><span class="params">(String num)</span> </span>&#123;</span><br><span class="line">RespInfo respInfo = <span class="keyword">new</span> RespInfo();</span><br><span class="line">respInfo.setCode(<span class="number">20</span>);</span><br><span class="line">Map&lt;String,String&gt; map = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">map.put(<span class="string">"num"</span>,num);</span><br><span class="line">map.put(<span class="string">"path"</span>,request.getRequestURI());</span><br><span class="line">map.put(<span class="string">"sessionid"</span>,session.getId());</span><br><span class="line">respInfo.setData(map);</span><br><span class="line">System.out.println(JSON.toJSONString(map));</span><br><span class="line"><span class="keyword">return</span> JSON.toJSONString(respInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>前端 vue</p><p>  修改前端axios请求，在axios的全局配置</p><p>  这句话的意思是每次请求都带上cookie,这样每次取请求后端,就不会被认为是不同用户导致session丢失.哦了!</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.withCredentials = true</span><br></pre></td></tr></table></figure><p>  main.js</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import App from &apos;./App&apos;</span><br><span class="line">import router from &apos;./router&apos;</span><br><span class="line">import axios from  &apos;axios&apos;</span><br><span class="line">import iView from &apos;iview&apos;;</span><br><span class="line">import &apos;iview/dist/styles/iview.css&apos;;</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line">axios.defaults.withCredentials = true</span><br><span class="line"></span><br><span class="line">Vue.use(iView)</span><br><span class="line"></span><br><span class="line">/* eslint-disable no-new */</span><br><span class="line">new Vue(&#123;</span><br><span class="line">el: &apos;#app&apos;,</span><br><span class="line">router,</span><br><span class="line">components: &#123; App &#125;,</span><br><span class="line">template: &apos;&lt;App/&gt;&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h2 id="三、axios-获取error的状态值"><a href="#三、axios-获取error的状态值" class="headerlink" title="三、axios 获取error的状态值"></a>三、axios 获取error的状态值</h2><p>当axios获取请求错误的时候,我们找不到error里面的具体信息</p><p><img src="https://ws1.sinaimg.cn/large/ad76c30bly1g1qde6gffrj20xj0dsmz7.jpg" alt=""></p><p>得不到里面的status和具体的信息</p><p>解决方法: 我们只需要在error后面添加error.response</p><p>然后就可以发现,具体的信息全部都出来了</p><hr><p><br></p><blockquote><p>参考：</p><p><a href="https://blog.csdn.net/qq_38082304/article/details/79914994" target="_blank" rel="noopener">https://blog.csdn.net/qq_38082304/article/details/79914994</a></p><p><a href="https://github.com/niezhiliang/multy-domain-user-identifying" target="_blank" rel="noopener">https://github.com/niezhiliang/multy-domain-user-identifying</a></p><p><a href="https://blog.csdn.net/weixin_41838204/article/details/82107567" target="_blank" rel="noopener">https://blog.csdn.net/weixin_41838204/article/details/82107567</a></p><p><a href="https://blog.csdn.net/qq_35493664/article/details/83502472" target="_blank" rel="noopener">https://blog.csdn.net/qq_35493664/article/details/83502472</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> SpringBoot vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql 学习</title>
      <link href="/2019/04/02/sql/"/>
      <url>/2019/04/02/sql/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h3 id="查询最近"><a href="#查询最近" class="headerlink" title="查询最近"></a>查询最近</h3><ul><li><p>查询近30天的所有日期</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOW</span>() - <span class="built_in">INTERVAL</span> (@i:=@i+<span class="number">1</span>) <span class="keyword">DAY</span> <span class="keyword">as</span> <span class="built_in">date</span></span><br><span class="line"><span class="keyword">FROM</span> information_schema. <span class="keyword">TABLES</span>, (<span class="keyword">SELECT</span> @i:=<span class="number">-1</span>) X</span><br><span class="line"><span class="keyword">WHERE</span> @i &lt; <span class="number">29</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">date</span></span><br></pre></td></tr></table></figure></li><li><p>查询当月所有日期</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">DATE_ADD</span>(</span><br><span class="line"><span class="keyword">curdate</span>(),</span><br><span class="line"><span class="built_in">INTERVAL</span> - <span class="keyword">DAY</span> (<span class="keyword">curdate</span>()) + <span class="number">1</span> <span class="keyword">DAY</span></span><br><span class="line">) + <span class="built_in">INTERVAL</span> (@i :=@i + <span class="number">1</span>) <span class="keyword">DAY</span> <span class="keyword">AS</span> <span class="built_in">date</span></span><br><span class="line">   <span class="keyword">FROM</span></span><br><span class="line">       information_schema. <span class="keyword">TABLES</span>,</span><br><span class="line">       (<span class="keyword">SELECT</span> @i :=- <span class="number">1</span>) X</span><br><span class="line">   <span class="keyword">WHERE</span></span><br><span class="line">       @i &lt; (</span><br><span class="line">           <span class="keyword">SELECT</span></span><br><span class="line">               <span class="keyword">DATEDIFF</span>(</span><br><span class="line">                   <span class="keyword">date_add</span>(</span><br><span class="line">                       <span class="keyword">curdate</span>() - <span class="keyword">DAY</span> (<span class="keyword">curdate</span>()) + <span class="number">1</span>,</span><br><span class="line">                       <span class="built_in">INTERVAL</span> <span class="number">1</span> <span class="keyword">MONTH</span></span><br><span class="line">                   ),</span><br><span class="line">                   <span class="keyword">DATE_ADD</span>(</span><br><span class="line">                       <span class="keyword">curdate</span>(),</span><br><span class="line">                       <span class="built_in">INTERVAL</span> - <span class="keyword">DAY</span> (<span class="keyword">curdate</span>()) + <span class="number">1</span> <span class="keyword">DAY</span></span><br><span class="line">                   )</span><br><span class="line">               )</span><br><span class="line">           <span class="keyword">FROM</span></span><br><span class="line">               DUAL</span><br><span class="line">       ) - <span class="number">1</span></span><br></pre></td></tr></table></figure><p>  修改版</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">DATE_ADD</span>(</span><br><span class="line">        <span class="string">'2018-02-26'</span>,</span><br><span class="line">        <span class="built_in">INTERVAL</span> - <span class="keyword">DAY</span> (<span class="string">'2018-02-26'</span>) + <span class="number">1</span> <span class="keyword">DAY</span></span><br><span class="line">    ) + <span class="built_in">INTERVAL</span> (@i :=@i + <span class="number">1</span>) <span class="keyword">DAY</span> <span class="keyword">AS</span> <span class="built_in">date</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    information_schema. <span class="keyword">TABLES</span>,</span><br><span class="line">    (<span class="keyword">SELECT</span> @i :=- <span class="number">1</span>) X</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    @i &lt; (</span><br><span class="line">        <span class="keyword">SELECT</span></span><br><span class="line">            <span class="keyword">DAY</span> (<span class="keyword">LAST_DAY</span>(<span class="string">'2018-02-26'</span>))</span><br><span class="line">    ) - <span class="number">1</span></span><br></pre></td></tr></table></figure></li><li><p>查询当月每日的数量</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.date, <span class="keyword">IFNULL</span>(b.count,<span class="number">0</span>) <span class="keyword">as</span> <span class="keyword">count</span></span><br><span class="line"><span class="keyword">FROM</span>(</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">DATE_ADD</span>(</span><br><span class="line">        <span class="keyword">curdate</span>(),</span><br><span class="line">        <span class="built_in">INTERVAL</span> - <span class="keyword">DAY</span> (<span class="keyword">curdate</span>()) + <span class="number">1</span> <span class="keyword">DAY</span></span><br><span class="line">    ) + <span class="built_in">INTERVAL</span> (@i :=@i + <span class="number">1</span>) <span class="keyword">DAY</span> <span class="keyword">AS</span> <span class="built_in">date</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    information_schema. <span class="keyword">TABLES</span>,</span><br><span class="line">    (<span class="keyword">SELECT</span> @i :=- <span class="number">1</span>) X</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    @i &lt; (</span><br><span class="line">        <span class="keyword">SELECT</span></span><br><span class="line">            <span class="keyword">DATEDIFF</span>(</span><br><span class="line">                <span class="keyword">date_add</span>(</span><br><span class="line">                    <span class="keyword">curdate</span>() - <span class="keyword">DAY</span> (<span class="keyword">curdate</span>()) + <span class="number">1</span>,</span><br><span class="line">                    <span class="built_in">INTERVAL</span> <span class="number">1</span> <span class="keyword">MONTH</span></span><br><span class="line">                ),</span><br><span class="line">                <span class="keyword">DATE_ADD</span>(</span><br><span class="line">                    <span class="keyword">curdate</span>(),</span><br><span class="line">                    <span class="built_in">INTERVAL</span> - <span class="keyword">DAY</span> (<span class="keyword">curdate</span>()) + <span class="number">1</span> <span class="keyword">DAY</span></span><br><span class="line">                )</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">FROM</span></span><br><span class="line">            DUAL</span><br><span class="line">    ) - <span class="number">1</span></span><br><span class="line">) a <span class="keyword">LEFT</span> <span class="keyword">JOIN</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">DATE_FORMAT</span>(backTime, <span class="string">'%Y-%m-%d'</span>) <span class="keyword">as</span> <span class="keyword">Day</span>, <span class="keyword">count</span>(<span class="keyword">distinct</span> <span class="string">`id`</span>) <span class="keyword">as</span> <span class="keyword">count</span></span><br><span class="line">    <span class="keyword">FROM</span> dbtest.book_user_pay_order</span><br><span class="line">    <span class="keyword">WHERE</span> <span class="keyword">status</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">DATE_FORMAT</span>(backTime,<span class="string">'%Y-%m-%d'</span>)</span><br><span class="line">) b <span class="keyword">on</span> a.date = b.Day <span class="keyword">ORDER</span> <span class="keyword">BY</span> a.date</span><br></pre></td></tr></table></figure></li><li><p>查询指定日期的每小时的数量</p><p>  IFNULL(b.count,0) ， 如果是空填补0</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.hours, <span class="keyword">IFNULL</span>(b.count,<span class="number">0</span>) <span class="keyword">as</span> <span class="keyword">count</span></span><br><span class="line"><span class="keyword">FROM</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> <span class="number">2</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">3</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> <span class="number">4</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">5</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> <span class="number">6</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">7</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> <span class="number">8</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">9</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> <span class="number">10</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">11</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> <span class="number">12</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">13</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> <span class="number">14</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">15</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> <span class="number">16</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">17</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> <span class="number">18</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">19</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> <span class="number">20</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">21</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> <span class="number">22</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">23</span> <span class="keyword">AS</span> hours <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> <span class="number">0</span> <span class="keyword">AS</span> hours</span><br><span class="line">) a <span class="keyword">LEFT</span> <span class="keyword">JOIN</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">DATE_FORMAT</span>(backTime, <span class="string">'%H'</span>) <span class="keyword">as</span> Hour2, <span class="keyword">count</span>(<span class="keyword">distinct</span> <span class="string">`id`</span>) <span class="keyword">as</span> <span class="keyword">count</span></span><br><span class="line">    <span class="keyword">FROM</span> book_user_pay_order</span><br><span class="line">    <span class="keyword">WHERE</span> <span class="keyword">status</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">AND</span> <span class="keyword">TO_DAYS</span>(backTime) = <span class="keyword">TO_DAYS</span>(<span class="comment">#&#123;date&#125;)</span></span><br><span class="line">    <span class="comment">-- AND TO_DAYS(backTime) = TO_DAYS('2019-02-25')</span></span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">DATE_FORMAT</span>(backTime,<span class="string">'%H'</span>)</span><br><span class="line">) b <span class="keyword">on</span> a.hours = b.Hour2 <span class="keyword">ORDER</span> <span class="keyword">BY</span> a.hours</span><br></pre></td></tr></table></figure></li><li><p>查询指定年份下的每月的数量</p><p>  CONCAT(#{year},’-01’) ， 是为了拼接年月，相当于2019-01</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.yearMonth, <span class="keyword">IFNULL</span>(b.count,<span class="number">0</span>) <span class="keyword">as</span> <span class="keyword">count</span></span><br><span class="line"><span class="keyword">FROM</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="comment">#&#123;year&#125;,'-01') AS yearMonth UNION ALL SELECT CONCAT(#&#123;year&#125;,'-02') AS yearMonth UNION ALL</span></span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="comment">#&#123;year&#125;,'-03') AS yearMonth UNION ALL SELECT CONCAT(#&#123;year&#125;,'-04') AS yearMonth UNION ALL</span></span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="comment">#&#123;year&#125;,'-05') AS yearMonth UNION ALL SELECT CONCAT(#&#123;year&#125;,'-06') AS yearMonth UNION ALL</span></span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="comment">#&#123;year&#125;,'-07') AS yearMonth UNION ALL SELECT CONCAT(#&#123;year&#125;,'-08') AS yearMonth UNION ALL</span></span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="comment">#&#123;year&#125;,'-09') AS yearMonth UNION ALL SELECT CONCAT(#&#123;year&#125;,'-10') AS yearMonth UNION ALL</span></span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="comment">#&#123;year&#125;,'-11') AS yearMonth UNION ALL SELECT CONCAT(#&#123;year&#125;,'-12') AS yearMonth</span></span><br><span class="line">) a <span class="keyword">LEFT</span> <span class="keyword">JOIN</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">DATE_FORMAT</span>(backTime, <span class="string">'%Y-%m'</span>) <span class="keyword">as</span> <span class="keyword">Month</span>, <span class="keyword">count</span>(<span class="keyword">distinct</span> <span class="string">`id`</span>) <span class="keyword">as</span> <span class="keyword">count</span></span><br><span class="line">    <span class="keyword">FROM</span> book_user_pay_order</span><br><span class="line">    <span class="keyword">WHERE</span> <span class="keyword">status</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">AND</span> <span class="keyword">year</span>(backTime) = <span class="comment">#&#123;year&#125;</span></span><br><span class="line">    <span class="comment">-- AND year(backTime) = '2019'</span></span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">DATE_FORMAT</span>(backTime,<span class="string">'%Y-%m'</span>)</span><br><span class="line">) b <span class="keyword">on</span> a.yearMonth = b.Month <span class="keyword">ORDER</span> <span class="keyword">BY</span> a.yearMonth</span><br></pre></td></tr></table></figure></li><li><p>查询最近七天的数量</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id="get7DaysCountByPlatform" resultType="Map"&gt;</span><br><span class="line">    <span class="keyword">select</span> a.click_date,<span class="keyword">ifnull</span>(b.count,<span class="number">0</span>) <span class="keyword">as</span> <span class="keyword">count</span></span><br><span class="line">    <span class="keyword">from</span> (</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="keyword">curdate</span>() <span class="keyword">as</span> click_date</span><br><span class="line">        <span class="keyword">union</span> all</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="keyword">date_sub</span>(<span class="keyword">curdate</span>(), <span class="built_in">interval</span> <span class="number">1</span> <span class="keyword">day</span>) <span class="keyword">as</span> click_date</span><br><span class="line">        <span class="keyword">union</span> all</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="keyword">date_sub</span>(<span class="keyword">curdate</span>(), <span class="built_in">interval</span> <span class="number">2</span> <span class="keyword">day</span>) <span class="keyword">as</span> click_date</span><br><span class="line">        <span class="keyword">union</span> all</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="keyword">date_sub</span>(<span class="keyword">curdate</span>(), <span class="built_in">interval</span> <span class="number">3</span> <span class="keyword">day</span>) <span class="keyword">as</span> click_date</span><br><span class="line">        <span class="keyword">union</span> all</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="keyword">date_sub</span>(<span class="keyword">curdate</span>(), <span class="built_in">interval</span> <span class="number">4</span> <span class="keyword">day</span>) <span class="keyword">as</span> click_date</span><br><span class="line">        <span class="keyword">union</span> all</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="keyword">date_sub</span>(<span class="keyword">curdate</span>(), <span class="built_in">interval</span> <span class="number">5</span> <span class="keyword">day</span>) <span class="keyword">as</span> click_date</span><br><span class="line">        <span class="keyword">union</span> all</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="keyword">date_sub</span>(<span class="keyword">curdate</span>(), <span class="built_in">interval</span> <span class="number">6</span> <span class="keyword">day</span>) <span class="keyword">as</span> click_date</span><br><span class="line">    ) a <span class="keyword">left</span> <span class="keyword">join</span> (</span><br><span class="line">      <span class="keyword">select</span> <span class="built_in">date</span>(backTime) <span class="keyword">as</span> datetime, <span class="keyword">count</span>(*) <span class="keyword">as</span> <span class="keyword">count</span></span><br><span class="line">      <span class="keyword">from</span> book_user_pay_order</span><br><span class="line">      <span class="keyword">group</span> <span class="keyword">by</span> <span class="built_in">date</span>(backTime)</span><br><span class="line">    ) b <span class="keyword">on</span> a.click_date = b.datetime</span><br><span class="line">&lt;/<span class="keyword">select</span>&gt;</span><br></pre></td></tr></table></figure></li></ul><h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><ul><li>生成 n 行  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> i <span class="built_in">int</span>; </span><br><span class="line">    <span class="keyword">set</span> i=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">set</span> @s=<span class="string">'select 1'</span>;</span><br><span class="line">    while i &lt; 23 do</span><br><span class="line">    <span class="keyword">set</span> @s=<span class="keyword">concat</span>(@s,<span class="string">' AS hours union all '</span>,<span class="keyword">concat</span>(<span class="string">'select '</span>,i+<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">set</span> i = i + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">while</span>;</span><br><span class="line">    <span class="comment">-- select @s;</span></span><br><span class="line">        <span class="keyword">prepare</span> stmt <span class="keyword">from</span> @s;</span><br><span class="line">        <span class="keyword">execute</span> stmt;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></li></ul><hr><p><br></p><blockquote><p>参考：</p><p><a href="https://blog.csdn.net/ouyang111222/article/details/77638826?tdsourcetag=s_pctim_aiomsg" target="_blank" rel="noopener">https://blog.csdn.net/ouyang111222/article/details/77638826?tdsourcetag=s_pctim_aiomsg</a> </p><p><a href="https://www.cnblogs.com/kenshinobiy/p/4920723.html" target="_blank" rel="noopener">https://www.cnblogs.com/kenshinobiy/p/4920723.html</a></p><p><a href="https://blog.csdn.net/Axela30W/article/details/76507021" target="_blank" rel="noopener">https://blog.csdn.net/Axela30W/article/details/76507021</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot使用CROS解决跨域问题</title>
      <link href="/2019/03/29/cros/"/>
      <url>/2019/03/29/cros/</url>
      
        <content type="html"><![CDATA[<h2 id="一、跨域"><a href="#一、跨域" class="headerlink" title="一、跨域"></a>一、跨域</h2><p>对于前后端分离的项目来说，如果前端项目与后端项目部署在两个不同的域下，那么势必会引起跨域问题的出现。</p><p>针对跨域问题，我们可能第一个想到的解决方案就是jsonp，并且以前处理跨域问题我基本也是这么处理。</p><p>但是jsonp方式也同样有不足，不管是对于前端还是后端来说，写法与我们平常的ajax写法不同，同样后端也需要作出相应的更改。并且，jsonp方式只能通过get请求方式来传递参数，当然也还有其它的不足之处，针对于此，我并没有急着使用jsonp的方式来解决跨域问题，去网上找寻其它方式，也就是本文主要所要讲的，在springboot中通过cors协议解决跨域问题。</p><a id="more"></a><h2 id="二、Cors协议"><a href="#二、Cors协议" class="headerlink" title="二、Cors协议"></a>二、Cors协议</h2><p>H5中的新特性：Cross-Origin Resource Sharing（跨域资源共享）。通过它，我们的开发者（主要指后端开发者）可以决定资源是否能被跨域访问。</p><p>cors是一个w3c标准，它允许浏览器（目前ie8以下还不能被支持）像我们不同源的服务器发出xmlHttpRequest请求，我们可以继续使用ajax进行请求访问。</p><p>具体关于cors协议的文章 ，可以参考<a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2016/04/cors.html</a> 这篇文章，讲的相当不错。</p><h2 id="三、解决"><a href="#三、解决" class="headerlink" title="三、解决"></a>三、解决</h2><p>下列提供三种springboot + cors 解决跨域的方案</p><h3 id="1-CrossOrigin注解方式-Controller-method-CORS-configuration"><a href="#1-CrossOrigin注解方式-Controller-method-CORS-configuration" class="headerlink" title="1. @CrossOrigin注解方式 Controller method CORS configuration"></a>1. @CrossOrigin注解方式 Controller method CORS configuration</h3><ul><li><p>在控制层方法上注解@CrossOrigin</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"users"</span>, method = RequestMethod.GET)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseEntity&lt;JsonResult&gt; <span class="title">getUserList</span> <span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在整个Controller类上面。即该controller所有映射都支持跨域请求。</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin</span>(origins = <span class="string">"http://domain2.com"</span>,</span><br><span class="line">maxAge = <span class="number">3600</span>,</span><br><span class="line">methods = &#123;RequestMethod.GET, RequestMethod.POST&#125;)</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-全局CORS配置"><a href="#2-全局CORS配置" class="headerlink" title="2. 全局CORS配置"></a>2. 全局CORS配置</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.CorsRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CORSConfiguration</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> WebMvcConfigurer <span class="title">corsConfigurer</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> WebMvcConfigurerAdapter() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line"><span class="comment">//registry.addMapping("/api/**");</span></span><br><span class="line"><span class="comment">// 请求路径</span></span><br><span class="line">registry.addMapping(<span class="string">"/**"</span>) </span><br><span class="line"><span class="comment">// 允许跨域的地址</span></span><br><span class="line">.allowedOrigins(<span class="string">"http://domain.com"</span>, <span class="string">"http://domain2.com"</span>) </span><br><span class="line"><span class="comment">// 允许请求的类型</span></span><br><span class="line">.allowedMethods(<span class="string">"GET"</span>, <span class="string">"POST"</span>, <span class="string">"DELETE"</span>, <span class="string">"PUT"</span>, <span class="string">"OPTIONS"</span>)</span><br><span class="line">.allowCredentials(<span class="keyword">false</span>).maxAge(<span class="number">3600</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-过滤器实现跨域-Filter-based-CORS-support"><a href="#3-过滤器实现跨域-Filter-based-CORS-support" class="headerlink" title="3. 过滤器实现跨域 Filter based CORS support"></a>3. 过滤器实现跨域 Filter based CORS support</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfiguration</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">corsFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">UrlBasedCorsConfigurationSource source = <span class="keyword">new</span> UrlBasedCorsConfigurationSource();</span><br><span class="line">CorsConfiguration config = <span class="keyword">new</span> CorsConfiguration();</span><br><span class="line">config.setAllowCredentials(<span class="keyword">false</span>);</span><br><span class="line">config.addAllowedOrigin(<span class="string">"http://domain.com"</span>);</span><br><span class="line">config.addAllowedHeader(<span class="string">"*"</span>);</span><br><span class="line">config.addAllowedMethod(<span class="string">"*"</span>);</span><br><span class="line">source.registerCorsConfiguration(<span class="string">"/**"</span>, config);</span><br><span class="line">FilterRegistrationBean bean = <span class="keyword">new</span> FilterRegistrationBean(<span class="keyword">new</span> CorsFilter(source));</span><br><span class="line">bean.setOrder(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><br></p><blockquote><p>参考：</p><p><a href="https://blog.csdn.net/saytime/article/details/74937204" target="_blank" rel="noopener">https://blog.csdn.net/saytime/article/details/74937204</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CROS, 跨域 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu查看本机IP</title>
      <link href="/2019/03/29/ip/"/>
      <url>/2019/03/29/ip/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><ol><li><p>下载net-tools</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install net-tools</span><br></pre></td></tr></table></figure></li><li><p>输入命令</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure><p> <img src="https://ws1.sinaimg.cn/large/ad76c30bly1g1jfsynrdaj20jz04r753.jpg" alt=""></p><p> 其中inet之后的就是ip地址</p><p> inet6之后的就是ipv6地址</p></li></ol><hr><p><br></p><blockquote><p>参考：</p><p><a href="https://blog.csdn.net/zhangvalue/article/details/80270169" target="_blank" rel="noopener">https://blog.csdn.net/zhangvalue/article/details/80270169</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot 部署</title>
      <link href="/2019/03/28/jar/"/>
      <url>/2019/03/28/jar/</url>
      
        <content type="html"><![CDATA[<blockquote><p>SpringBoot部署到服务器，首先我们需要将项目打成jar包，然后上传到服务器上，在执行jar。</p></blockquote><a id="more"></a><h3 id="idea配置"><a href="#idea配置" class="headerlink" title="idea配置"></a>idea配置</h3><ul><li><p>在 IDEA 上 File—&gt;Setting—&gt;Project Structure  </p><p>选择 Artifacts ，右上角加号添加—&gt;jar</p><p><img src="https://ws1.sinaimg.cn/large/ad76c30bly1g1icaimtltj21hc0t4wix.jpg" alt="avatar"></p><p><img src="https://ws1.sinaimg.cn/large/ad76c30bly1g1icailb3vj20sk0k5mxw.jpg" alt="avatar"></p></li></ul><h2 id="配置pom-xml"><a href="#配置pom-xml" class="headerlink" title="配置pom.xml"></a>配置pom.xml</h2><ul><li><p>项目<br><img src="https://ws1.sinaimg.cn/large/ad76c30bly1g1id5ke7vdj20lv0bn75g.jpg" alt=""></p></li><li><p>依赖打包插件</p>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>如果部署的是war包 声明war</p>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="在idea上打包项目"><a href="#在idea上打包项目" class="headerlink" title="在idea上打包项目"></a>在idea上打包项目</h2><ul><li><p>打开侧边栏的 Maven Project 双击 Package</p><p>  <img src="https://ws1.sinaimg.cn/large/ad76c30bly1g1id7mx3aoj20aa0dt3yn.jpg" alt=""></p></li><li><p>这时候控制台开始记录打包过程，如果打包成功，出现如下界面<br>  <img src="https://ws1.sinaimg.cn/large/ad76c30bly1g1id8lx3vrj20tj0bm0t6.jpg" alt=""></p></li><li><p>最终在 target 目录下生成 以工程名+版本号为名的 jar 文件就是我们想要的。<br>  <img src="https://ws1.sinaimg.cn/large/ad76c30bly1g1id9kbqv1j20a40dm74f.jpg" alt=""></p></li></ul><h2 id="测试启动jar运行项目"><a href="#测试启动jar运行项目" class="headerlink" title="测试启动jar运行项目"></a>测试启动jar运行项目</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar springboot_shiro-<span class="number">0.0</span>.1-SNAPSHOT.jar</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/ad76c30bly1g1idbgi21zj20tj0bm0t6.jpg" alt=""></p><h2 id="在Linux上启动打包好的jar包"><a href="#在Linux上启动打包好的jar包" class="headerlink" title="在Linux上启动打包好的jar包"></a>在Linux上启动打包好的jar包</h2><p>spring boot项目打完jar包后（如aaa.jar），上传到linux服务器上(/data)</p><p>1、cd到/data目录</p><p>2、执行命令:</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar aaa.jar &amp;</span><br></pre></td></tr></table></figure><p>然后回车</p><p>也可以指定日志文件文件名随意（如：aaa.log）</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar aaa.jar &gt; aaa.log <span class="number">2</span>&gt;&amp;<span class="number">1</span> &amp;</span><br></pre></td></tr></table></figure><p>3、查看进程可以使用</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep 'java -jar'</span><br></pre></td></tr></table></figure><p>4、运行后，在当前路径下会生成nohup.out文件，会记录服务器的日志。</p><p>5、查看日志，cd 到日志目录</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f aaa.log</span><br></pre></td></tr></table></figure><p><br></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul><li><p>jar 包部署不需要安装Tomcat, 直接使用命令启动即可</p></li><li><p>war 包部署需要Tomcat</p></li></ul><hr><p><br></p><blockquote><p>参考：</p><p><a href="https://blog.csdn.net/qq_34409900/article/details/80561277" target="_blank" rel="noopener">https://blog.csdn.net/qq_34409900/article/details/80561277</a></p><p><a href="https://blog.csdn.net/qq_32423845/article/details/79851737" target="_blank" rel="noopener">https://blog.csdn.net/qq_32423845/article/details/79851737</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> jar </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/01/15/Hello%20World/"/>
      <url>/2019/01/15/Hello%20World/</url>
      
        <content type="html"><![CDATA[<p>Hello World</p><a id="more"></a><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><pre><code>1. 安装主题：    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git@github.com:blackshow/hexo-theme-freemind.386.git themes/freemind</span><br></pre></td></tr></table></figure>2. 安装 hexo-tag-bootstrap （可选）:    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-tag-bootsrap --save</span><br></pre></td></tr></table></figure>3. 安装 hexo-generatr-search （可选）：    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure>4. 创建页面    Freemind.386 预先定义了 Categories（分类）、Tags（标签） 和 About（关于）页面，要使用它们，你需要先在你的博客的 source 目录中添加相应页面。    例如，要创建 Categories 页面，在终端上：    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd /path/to/hexo/</span><br><span class="line">hexo n page categories</span><br></pre></td></tr></table></figure>    然后编辑 source/categories/ 下的 index.md 。</code></pre><h3 id="启用"><a href="#启用" class="headerlink" title="启用"></a>启用</h3><pre><code>修改 _config.yml 文件里的 theme 选项为 freemind.386 即可        </code></pre><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><pre><code>freemind.386/_config.yml<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">slogan: &quot;Keep and carry on.&quot;</span><br><span class="line">#菜单</span><br><span class="line">menu:</span><br><span class="line">- title: Archives</span><br><span class="line">    url: archives</span><br><span class="line">    intro: &quot;All the articles.&quot;</span><br><span class="line">    # icon: &quot;fa fa-archive&quot;</span><br><span class="line">- title: Categories</span><br><span class="line">    url: categories</span><br><span class="line">    intro: &quot;All the categories.&quot;</span><br><span class="line">    # icon: &quot;fa fa-folder&quot;</span><br><span class="line">- title: Tags</span><br><span class="line">    url: tags</span><br><span class="line">    intro: &quot;All the tags.&quot;</span><br><span class="line">    # icon: &quot;fa fa-tags&quot;</span><br><span class="line">- title: About</span><br><span class="line">    url: about</span><br><span class="line">    intro: &quot;About me.&quot;</span><br><span class="line">    # icon: &quot;fa fa-user&quot;</span><br><span class="line">#友情链接</span><br><span class="line">links:</span><br><span class="line">- title: Freemind</span><br><span class="line">    url: https://github.com/wzpan/hexo-theme-freemind</span><br><span class="line">    intro: &quot;Freemind&apos;s Github repository.&quot;</span><br><span class="line">    icon: &quot;fa fa-github&quot;</span><br><span class="line">- title: BOOTSTRA.386</span><br><span class="line">    url: https://github.com/kristopolous/BOOTSTRA.386</span><br><span class="line">    intro: &quot;BOOTSTRA.386&apos;s Github repository.&quot;</span><br><span class="line">    icon: &quot;fa fa-github&quot;</span><br><span class="line">- title: Freemind.386</span><br><span class="line">    url: https://github.com/blackshow/hexo-theme-freemind.386</span><br><span class="line">    intro: &quot;Freemind.386&apos;s Github repository.&quot;</span><br><span class="line">    icon: &quot;fa fa-github&quot;</span><br><span class="line">- title: &quot;My Github&quot;</span><br><span class="line">    url: http://www.github.com/blackshow</span><br><span class="line">    intro: &quot;My Github account.&quot;</span><br><span class="line">    icon: &quot;fa fa-github&quot;</span><br><span class="line"># - title: &quot;My LinkedIn&quot;</span><br><span class="line">#   url: http://www.linkedin.com/in/xxx</span><br><span class="line">#   intro: &quot;My Linkin account.&quot;</span><br><span class="line">#   icon: &quot;fa fa-linkedin&quot;</span><br><span class="line">widgets:</span><br><span class="line">- search</span><br><span class="line">- category</span><br><span class="line">- tagcloud</span><br><span class="line">- recent_posts</span><br><span class="line">- links</span><br><span class="line">rss: </span><br><span class="line">fancybox: true</span><br><span class="line">favicon: favicon.png</span><br><span class="line">duoshuo_shortname:</span><br><span class="line"># Analytics</span><br><span class="line">google_analytics:</span><br><span class="line">enable: false</span><br><span class="line">siteid:</span><br><span class="line">baidu_tongji:</span><br><span class="line">enable: false</span><br><span class="line">siteid:</span><br><span class="line"># search</span><br><span class="line">#swiftype_key: ZP2ZSuHgipSZfRyU8uTR</span><br></pre></td></tr></table></figure></code></pre><h3 id="编辑Markdown"><a href="#编辑Markdown" class="headerlink" title="编辑Markdown"></a>编辑Markdown</h3><pre><code>1. 文件头，front-matter 选项，利用这些选项可以更好的装饰你的文章。    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Freemind.386中文说明</span><br><span class="line">date: 2015-11-25 10:56:20</span><br><span class="line">description: 这篇文章是关于Freemind.386的介绍.</span><br><span class="line">categories: code</span><br><span class="line">tags: hexo </span><br><span class="line">toc: true</span><br><span class="line">#feature: http://blackshow.me/favicon.png</span><br><span class="line">---</span><br></pre></td></tr></table></figure>2. Read More ，手动添加首页文章的预览信息    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--more--&gt;</span><br></pre></td></tr></table></figure>3. Markdown 语法</code></pre><h3 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h3><pre><code>1. 在你博客站点文件夹下右键空白处，选择Git Bash Here，输入 hexo g (完整命令为hexo generate)，用于生成静态文件2. 然后 输入 hexo s(完整命令为hexo server)，用于启动服务器，主要用来本地预览；   完成后 打开浏览器输入 localhost:4000，会发现多了你刚写的那篇博客3. 最后输入hexo d(hexo deploy)，用于将本地文件发布到github等git仓库上；</code></pre>]]></content>
      
      
      <categories>
          
          <category> test </category>
          
      </categories>
      
      
        <tags>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
